<div class="highlight"><div><pre><span class="c1">; type key 10</span>
<span class="nc"><dfn>agent-info-request</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">request</span>
<span class="p">}</span>

<span class="c1">; type key 11</span>
<span class="nc"><dfn>agent-info-response</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">response</span>
<span class="nx">  1</span><span class="p">:</span> <span class="nx">agent-info </span><span class="c1">; agent-info</span>
<span class="p">}</span>

<span class="c1">; type key 120</span>
<span class="nc"><dfn>agent-info-event</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="nx">agent-info </span><span class="c1">; agent-info</span>
<span class="p">}</span>

<span class="nc">agent-capability </span><span class="p">=</span> <span class="o">&amp;</span><span class="p">(</span>
  <span class="nx">receive-audio</span><span class="p">:</span> <span class="mi">1</span>
  <span class="nx">receive-video</span><span class="p">:</span> <span class="mi">2</span>
  <span class="nx">receive-presentation</span><span class="p">:</span> <span class="mi">3</span>
  <span class="nx">control-presentation</span><span class="p">:</span> <span class="mi">4</span>
  <span class="nx">receive-remote-playback</span><span class="p">:</span> <span class="mi">5</span>
  <span class="nx">control-remote-playback</span><span class="p">:</span> <span class="mi">6</span>
  <span class="nx">receive-streaming</span><span class="p">:</span> <span class="mi">7</span>
  <span class="nx">send-streaming</span><span class="p">:</span> <span class="mi">8</span>
<span class="p">)</span>

<span class="nc"><dfn>agent-info</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; display-name</span>
  <span class="mi">1</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; model-name</span>
  <span class="mi">2</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">agent-capability</span><span class="p">]</span> <span class="c1">; capabilities</span>
  <span class="mi">3</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; state-token</span>
  <span class="mi">4</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">text</span><span class="p">]</span> <span class="c1">; locales</span>
<span class="p">}</span>

<span class="c1">; type key 12</span>
<span class="nc"><dfn>agent-status-request</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">request</span>
<span class="nx">  </span><span class="p">?</span> <span class="mi">1</span><span class="p">:</span> <span class="nx">status </span><span class="c1">; status</span>
<span class="p">}</span>

<span class="c1">; type key 13</span>
<span class="nc"><dfn>agent-status-response</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">response</span>
<span class="nx">  </span><span class="p">?</span> <span class="mi">1</span><span class="p">:</span> <span class="nx">status </span><span class="c1">; status</span>
<span class="p">}</span>

<span class="nc">status </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; status</span>
<span class="p">}</span>

<span class="nc">request </span><span class="p">=</span> <span class="p">(</span>
  <span class="mi">0</span><span class="p">:</span> <span class="nx">request-id </span><span class="c1">; request-id</span>
<span class="p">)</span>

<span class="nc">response </span><span class="p">=</span> <span class="p">(</span>
  <span class="mi">0</span><span class="p">:</span> <span class="nx">request-id </span><span class="c1">; request-id</span>
<span class="p">)</span>

<span class="nc">request-id </span><span class="p">=</span> <span class="kt">uint</span>

<span class="nc">microseconds </span><span class="p">=</span> <span class="kt">uint</span>

<span class="nc">epoch-time </span><span class="p">=</span> <span class="kt">int</span>

<span class="nc">media-timeline </span><span class="p">=</span> <span class="kt">float64</span>

<span class="nc">media-timeline-range </span><span class="p">=</span> <span class="p">[</span>
  <span class="nx">start</span><span class="p">:</span> <span class="nx">media-timeline</span>
<span class="nx">  end</span><span class="p">:</span> <span class="nx">media-timeline</span>
<span class="p">]</span>

<span class="nc">watch-id </span><span class="p">=</span> <span class="kt">uint</span>

<span class="c1">; type key 14</span>
<span class="nc"><dfn>presentation-url-availability-request</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">request</span>
<span class="nx">  1</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="o">*</span> <span class="nx">text</span><span class="p">]</span> <span class="c1">; urls</span>
  <span class="mi">2</span><span class="p">:</span> <span class="nx">microseconds </span><span class="c1">; watch-duration</span>
  <span class="mi">3</span><span class="p">:</span> <span class="nx">watch-id </span><span class="c1">; watch-id</span>
<span class="p">}</span>

<span class="c1">; type key 15</span>
<span class="nc"><dfn>presentation-url-availability-response</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">response</span>
<span class="nx">  1</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="o">*</span> <span class="nx">url-availability</span><span class="p">]</span> <span class="c1">; url-availabilities</span>
<span class="p">}</span>

<span class="c1">; type key 103</span>
<span class="nc"><dfn>presentation-url-availability-event</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="nx">watch-id </span><span class="c1">; watch-id</span>
  <span class="mi">1</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="o">*</span> <span class="nx">url-availability</span><span class="p">]</span> <span class="c1">; url-availabilities</span>
<span class="p">}</span>

<span class="c1">; idea: use HTTP response codes?</span>
<span class="nc">url-availability </span><span class="p">=</span> <span class="o">&amp;</span><span class="p">(</span>
  <span class="nx">available</span><span class="p">:</span> <span class="mi">0</span>
  <span class="nx">unavailable</span><span class="p">:</span> <span class="mi">1</span>
  <span class="nx">invalid</span><span class="p">:</span> <span class="mi">10</span>
<span class="p">)</span>

<span class="c1">; type key 104</span>
<span class="nc"><dfn>presentation-start-request</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">request</span>
<span class="nx">  1</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; presentation-id</span>
  <span class="mi">2</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; url</span>
  <span class="mi">3</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">http-header</span><span class="p">]</span> <span class="c1">; headers</span>
<span class="p">}</span>

<span class="nc">http-header </span><span class="p">=</span> <span class="p">[</span>
  <span class="nx">key</span><span class="p">:</span> <span class="nx">text</span>
<span class="nx">  value</span><span class="p">:</span> <span class="nx">text</span>
<span class="p">]</span>

<span class="c1">; type key 105</span>
<span class="nc"><dfn>presentation-start-response</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">response</span>
<span class="nx">  1</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">result </span><span class="c1">; result</span>
  <span class="mi">2</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; connection-id</span>
  <span class="p">?</span> <span class="mi">3</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; http-response-code</span>
<span class="p">}</span>

<span class="nc">presentation-termination-source </span><span class="p">=</span> <span class="o">&amp;</span><span class="p">(</span>
  <span class="nx">controller</span><span class="p">:</span> <span class="mi">1</span>
  <span class="nx">receiver</span><span class="p">:</span> <span class="mi">2</span>
  <span class="nx">unknown</span><span class="p">:</span> <span class="mi">255</span>
<span class="p">)</span>

<span class="nc">presentation-termination-reason </span><span class="p">=</span> <span class="o">&amp;</span><span class="p">(</span>
  <span class="nx">application-request</span><span class="p">:</span> <span class="mi">1</span>
  <span class="nx">user-request</span><span class="p">:</span> <span class="mi">2</span>
  <span class="nx">receiver-replaced-presentation</span><span class="p">:</span> <span class="mi">20</span>
  <span class="nx">receiver-idle-too-long</span><span class="p">:</span> <span class="mi">30</span>
  <span class="nx">receiver-attempted-to-navigate</span><span class="p">:</span> <span class="mi">31</span>
  <span class="nx">receiver-powering-down</span><span class="p">:</span> <span class="mi">100</span>
  <span class="nx">receiver-error</span><span class="p">:</span> <span class="mi">101</span>
  <span class="nx">unknown</span><span class="p">:</span> <span class="mi">255</span>
<span class="p">)</span>

<span class="c1">; type key 106</span>
<span class="nc"><dfn>presentation-termination-request</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">request</span>
<span class="nx">  1</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; presentation-id</span>
  <span class="mi">2</span><span class="p">:</span> <span class="nx">presentation-termination-reason </span><span class="c1">; reason</span>
<span class="p">}</span>

<span class="c1">; type key 107</span>
<span class="nc"><dfn>presentation-termination-response</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">response</span>
<span class="nx">  1</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">result </span><span class="c1">; result</span>
<span class="p">}</span>

<span class="c1">; type key 108</span>
<span class="nc"><dfn>presentation-termination-event</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; presentation-id</span>
  <span class="mi">1</span><span class="p">:</span> <span class="nx">presentation-termination-source </span><span class="c1">; source</span>
  <span class="mi">2</span><span class="p">:</span> <span class="nx">presentation-termination-reason </span><span class="c1">; reason</span>
<span class="p">}</span>

<span class="c1">; type key 109</span>
<span class="nc"><dfn>presentation-connection-open-request</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">request</span>
<span class="nx">  1</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; presentation-id</span>
  <span class="mi">2</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; url</span>
<span class="p">}</span>

<span class="c1">; type key 110</span>
<span class="nc"><dfn>presentation-connection-open-response</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">response</span>
<span class="nx">  1</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">result </span><span class="c1">; result</span>
  <span class="mi">2</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; connection-id</span>
  <span class="mi">3</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; connection-count</span>
<span class="p">}</span>

<span class="c1">; type key 113</span>
<span class="nc"><dfn>presentation-connection-close-event</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; connection-id</span>
  <span class="mi">1</span><span class="p">:</span> <span class="o">&amp;</span><span class="p">(</span>
    <span class="nx">close-method-called</span><span class="p">:</span> <span class="mi">1</span>
    <span class="nx">connection-object-discarded</span><span class="p">:</span> <span class="mi">10</span>
    <span class="nx">unrecoverable-error-while-sending-or-receiving-message</span><span class="p">:</span> <span class="mi">100</span>
  <span class="p">)</span> <span class="c1">; reason</span>
  <span class="p">?</span> <span class="mi">2</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; error-message</span>
  <span class="mi">3</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; connection-count</span>
<span class="p">}</span>

<span class="c1">; type key 121</span>
<span class="nc"><dfn>presentation-change-event</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; presentation-id</span>
  <span class="mi">1</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; connection-count</span>
<span class="p">}</span>

<span class="c1">; type key 16</span>
<span class="nc"><dfn>presentation-connection-message</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; connection-id</span>
  <span class="mi">1</span><span class="p">:</span> <span class="nx">bytes </span><span class="o">/</span> <span class="nx">text </span><span class="c1">; message</span>
<span class="p">}</span>

<span class="nc">result </span><span class="p">=</span> <span class="p">(</span>
  <span class="nx">success</span><span class="p">:</span> <span class="mi">1</span>
  <span class="nx">invalid-url</span><span class="p">:</span> <span class="mi">10</span>
  <span class="nx">invalid-presentation-id</span><span class="p">:</span> <span class="mi">11</span>
  <span class="nx">timeout</span><span class="p">:</span> <span class="mi">100</span>
  <span class="nx">transient-error</span><span class="p">:</span> <span class="mi">101</span>
  <span class="nx">permanent-error</span><span class="p">:</span> <span class="mi">102</span>
  <span class="nx">terminating</span><span class="p">:</span> <span class="mi">103</span>
  <span class="nx">unknown-error</span><span class="p">:</span> <span class="mi">199</span>
<span class="p">)</span>

<span class="c1">; type key 17</span>
<span class="nc"><dfn>remote-playback-availability-request</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">request</span>
<span class="nx">  1</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">remote-playback-source</span><span class="p">]</span> <span class="c1">; sources</span>
  <span class="mi">2</span><span class="p">:</span> <span class="nx">microseconds </span><span class="c1">; watch-duration</span>
  <span class="mi">3</span><span class="p">:</span> <span class="nx">watch-id </span><span class="c1">; watch-id</span>
<span class="p">}</span>

<span class="c1">; type key 18</span>
<span class="nc"><dfn>remote-playback-availability-response</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">response</span>
<span class="nx">  1</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">url-availability</span><span class="p">]</span> <span class="c1">; url-availabilities</span>
<span class="p">}</span>

<span class="c1">; type key 114</span>
<span class="nc"><dfn>remote-playback-availability-event</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="nx">watch-id </span><span class="c1">; watch-id</span>
  <span class="mi">1</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">url-availability</span><span class="p">]</span> <span class="c1">; url-availabilities</span>
<span class="p">}</span>

<span class="c1">; type key 115</span>
<span class="nc"><dfn>remote-playback-start-request</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">request</span>
<span class="nx">  1</span><span class="p">:</span> <span class="nx">remote-playback-id </span><span class="c1">; remote-playback-id</span>
  <span class="p">?</span> <span class="mi">2</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">remote-playback-source</span><span class="p">]</span> <span class="c1">; sources</span>
  <span class="p">?</span> <span class="mi">3</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">text</span><span class="p">]</span> <span class="c1">; text-track-urls</span>
  <span class="p">?</span> <span class="mi">4</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">http-header</span><span class="p">]</span> <span class="c1">; headers</span>
  <span class="p">?</span> <span class="mi">5</span><span class="p">:</span> <span class="nx">remote-playback-controls </span><span class="c1">; controls</span>
  <span class="p">?</span> <span class="mi">6</span><span class="p">:</span> <span class="p">{</span><span class="nx">streaming-session-start-request-params</span><span class="p">}</span> <span class="c1">; remoting</span>
<span class="p">}</span>

<span class="nc">remote-playback-source </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="nx">text</span><span class="c1">; url</span>
  <span class="mi">1</span><span class="p">:</span> <span class="nx">text</span><span class="c1">; extended-mime-type</span>
<span class="p">}</span>

<span class="c1">; type key 116</span>
<span class="nc"><dfn>remote-playback-start-response</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">response</span>
<span class="nx">  </span><span class="p">?</span> <span class="mi">1</span><span class="p">:</span> <span class="nx">remote-playback-state </span><span class="c1">; state</span>
  <span class="p">?</span> <span class="mi">2</span><span class="p">:</span> <span class="p">{</span><span class="nx">streaming-session-start-response-params</span><span class="p">}</span> <span class="c1">; remoting</span>
<span class="p">}</span>

<span class="c1">; type key 117</span>
<span class="nc"><dfn>remote-playback-termination-request</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">request</span>
<span class="nx">  1</span><span class="p">:</span> <span class="nx">remote-playback-id </span><span class="c1">; remote-playback-id</span>
  <span class="mi">2</span><span class="p">:</span> <span class="o">&amp;</span><span class="p">(</span>
    <span class="nx">user-terminated-via-controller</span><span class="p">:</span> <span class="mi">11</span>
    <span class="nx">unknown</span><span class="p">:</span> <span class="mi">255</span>
  <span class="p">)</span> <span class="c1">; reason</span>
<span class="p">}</span>

<span class="c1">; type key 118</span>
<span class="nc"><dfn>remote-playback-termination-response</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">response</span>
<span class="nx">  1</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">result </span><span class="c1">; result</span>
<span class="p">}</span>

<span class="c1">; type key 119</span>
<span class="nc"><dfn>remote-playback-termination-event</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="nx">remote-playback-id </span><span class="c1">; remote-playback-id</span>
  <span class="mi">1</span><span class="p">:</span> <span class="o">&amp;</span><span class="p">(</span>
    <span class="nx">receiver-called-terminate</span><span class="p">:</span> <span class="mi">1</span>
    <span class="nx">user-terminated-via-receiver</span><span class="p">:</span> <span class="mi">2</span>
    <span class="nx">receiver-idle-too-long</span><span class="p">:</span> <span class="mi">30</span>
    <span class="nx">receiver-powering-down</span><span class="p">:</span> <span class="mi">100</span>
    <span class="nx">receiver-crashed</span><span class="p">:</span> <span class="mi">101</span>
    <span class="nx">unknown</span><span class="p">:</span> <span class="mi">255</span>
  <span class="p">)</span> <span class="c1">; reason</span>
<span class="p">}</span>

<span class="c1">; type key 19</span>
<span class="nc"><dfn>remote-playback-modify-request</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">request</span>
<span class="nx">  1</span><span class="p">:</span> <span class="nx">remote-playback-id </span><span class="c1">; remote-playback-id</span>
  <span class="mi">2</span><span class="p">:</span> <span class="nx">remote-playback-controls </span><span class="c1">; controls</span>
<span class="p">)</span>

<span class="c1">; type key 20</span>
<span class="nc"><dfn>remote-playback-modify-response</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">response</span>
<span class="nx">  1</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">result </span><span class="c1">; result</span>
  <span class="p">?</span> <span class="mi">2</span><span class="p">:</span> <span class="nx">remote-playback-state </span><span class="c1">; state</span>
<span class="p">}</span>

<span class="c1">; type key 21</span>
<span class="nc"><dfn>remote-playback-state-event</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="nx">remote-playback-id </span><span class="c1">; remote-playback-id</span>
  <span class="mi">1</span><span class="p">:</span> <span class="nx">remote-playback-state </span><span class="c1">; state</span>
<span class="p">}</span>

<span class="nc">remote-playback-id </span><span class="p">=</span> <span class="kt">uint</span>

<span class="nc">remote-playback-controls </span><span class="p">=</span> <span class="p">{</span>
  <span class="p">?</span> <span class="mi">0</span><span class="p">:</span> <span class="nx">remote-playback-source </span><span class="c1">; source</span>
  <span class="p">?</span> <span class="mi">1</span><span class="p">:</span> <span class="o">&amp;</span><span class="p">(</span>
    <span class="nx">none</span><span class="p">:</span> <span class="mi">0</span>
    <span class="nx">metadata</span><span class="p">:</span> <span class="mi">1</span>
    <span class="nx">auto</span><span class="p">:</span> <span class="mi">2</span>
  <span class="p">)</span> <span class="c1">; preload</span>
  <span class="p">?</span> <span class="mi">2</span><span class="p">:</span> <span class="nx">bool </span><span class="c1">; loop</span>
  <span class="p">?</span> <span class="mi">3</span><span class="p">:</span> <span class="nx">bool </span><span class="c1">; paused</span>
  <span class="p">?</span> <span class="mi">4</span><span class="p">:</span> <span class="nx">bool </span><span class="c1">; muted</span>
  <span class="p">?</span> <span class="mi">5</span><span class="p">:</span> <span class="kt">float64</span> <span class="c1">; volume</span>
  <span class="p">?</span> <span class="mi">6</span><span class="p">:</span> <span class="nx">media-timeline </span><span class="c1">; seek</span>
  <span class="p">?</span> <span class="mi">7</span><span class="p">:</span> <span class="nx">media-timeline </span><span class="c1">; fast-seek</span>
  <span class="p">?</span> <span class="mi">8</span><span class="p">:</span> <span class="kt">float64</span> <span class="c1">; playback-rate</span>
  <span class="p">?</span> <span class="mi">9</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; poster</span>
  <span class="p">?</span> <span class="mi">10</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">text</span><span class="p">]</span> <span class="c1">; enabled-audio-track-ids</span>
  <span class="p">?</span> <span class="mi">11</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; selected-video-track-id</span>
  <span class="p">?</span> <span class="mi">12</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">added-text-track</span><span class="p">]</span> <span class="c1">; added-text-tracks</span>
  <span class="p">?</span> <span class="mi">13</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">changed-text-track</span><span class="p">]</span> <span class="c1">; changed-text-tracks</span>
<span class="p">}</span>

<span class="nc">remote-playback-state </span><span class="p">=</span> <span class="p">{</span>
  <span class="p">?</span> <span class="mi">0</span><span class="p">:</span> <span class="p">{</span>
    <span class="mi">0</span><span class="p">:</span> <span class="nx">bool </span><span class="c1">; rate</span>
    <span class="mi">1</span><span class="p">:</span> <span class="nx">bool </span><span class="c1">; preload</span>
    <span class="mi">2</span><span class="p">:</span> <span class="nx">bool </span><span class="c1">; poster</span>
    <span class="mi">3</span><span class="p">:</span> <span class="nx">bool </span><span class="c1">; added-text-track</span>
    <span class="mi">4</span><span class="p">:</span> <span class="nx">bool </span><span class="c1">; added-cues</span>
  <span class="p">}</span> <span class="c1">; supports</span>
  <span class="p">?</span> <span class="mi">1</span><span class="p">:</span> <span class="nx">remote-playback-source </span><span class="c1">; source</span>
  <span class="p">?</span> <span class="mi">2</span><span class="p">:</span> <span class="o">&amp;</span><span class="p">(</span>
    <span class="nx">empty</span><span class="p">:</span> <span class="mi">0</span>
    <span class="nx">idle</span><span class="p">:</span> <span class="mi">1</span>
    <span class="nx">loading</span><span class="p">:</span> <span class="mi">2</span>
    <span class="nx">no-source</span><span class="p">:</span> <span class="mi">3</span>
  <span class="p">)</span> <span class="c1">; loading</span>
  <span class="p">?</span> <span class="mi">3</span><span class="p">:</span> <span class="o">&amp;</span><span class="p">(</span>
    <span class="nx">nothing</span><span class="p">:</span> <span class="mi">0</span>
    <span class="nx">metadata</span><span class="p">:</span> <span class="mi">1</span>
    <span class="nx">current</span><span class="p">:</span> <span class="mi">2</span>
    <span class="nx">future</span><span class="p">:</span> <span class="mi">3</span>
    <span class="nx">enough</span><span class="p">:</span> <span class="mi">4</span>
  <span class="p">)</span> <span class="c1">; loaded</span>
  <span class="p">?</span> <span class="mi">4</span><span class="p">:</span> <span class="nx">media-error </span><span class="c1">; error</span>
  <span class="p">?</span> <span class="mi">5</span><span class="p">:</span> <span class="nx">epoch-time </span><span class="o">/</span> <span class="kc">null</span> <span class="c1">; epoch</span>
  <span class="p">?</span> <span class="mi">6</span><span class="p">:</span> <span class="nx">media-timeline </span><span class="o">/</span> <span class="kc">null</span> <span class="c1">; duration</span>
  <span class="p">?</span> <span class="mi">7</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">media-timeline-range</span><span class="p">]</span> <span class="c1">; buffered-time-ranges</span>
  <span class="p">?</span> <span class="mi">8</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">media-timeline-range</span><span class="p">]</span> <span class="c1">; seekable-time-ranges</span>
  <span class="p">?</span> <span class="mi">9</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">media-timeline-range</span><span class="p">]</span> <span class="c1">; played-time-ranges</span>
  <span class="p">?</span> <span class="mi">10</span><span class="p">:</span> <span class="nx">media-timeline </span><span class="c1">; position</span>
  <span class="p">?</span> <span class="mi">11</span><span class="p">:</span> <span class="kt">float64</span> <span class="c1">; playbackRate</span>
  <span class="p">?</span> <span class="mi">12</span><span class="p">:</span> <span class="nx">bool </span><span class="c1">; paused</span>
  <span class="p">?</span> <span class="mi">13</span><span class="p">:</span> <span class="nx">bool </span><span class="c1">; seeking</span>
  <span class="p">?</span> <span class="mi">14</span><span class="p">:</span> <span class="nx">bool </span><span class="c1">; stalled</span>
  <span class="p">?</span> <span class="mi">15</span><span class="p">:</span> <span class="nx">bool </span><span class="c1">; ended</span>
  <span class="p">?</span> <span class="mi">16</span><span class="p">:</span> <span class="kt">float64</span> <span class="c1">; volume</span>
  <span class="p">?</span> <span class="mi">17</span><span class="p">:</span> <span class="nx">bool </span><span class="c1">; muted</span>
  <span class="p">?</span> <span class="mi">18</span><span class="p">:</span> <span class="nx">video-resolution </span><span class="o">/</span> <span class="kc">null</span> <span class="c1">; resolution</span>
  <span class="p">?</span> <span class="mi">19</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">audio-track-state</span><span class="p">]</span> <span class="c1">; audio-tracks</span>
  <span class="p">?</span> <span class="mi">20</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">video-track-state</span><span class="p">]</span> <span class="c1">; video-tracks</span>
  <span class="p">?</span> <span class="mi">21</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">text-track-state</span><span class="p">]</span> <span class="c1">; text-tracks</span>
<span class="p">}</span>

<span class="nc">added-text-track </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="o">&amp;</span><span class="p">(</span>
    <span class="nx">subtitles</span><span class="p">:</span> <span class="mi">1</span>
    <span class="nx">captions</span><span class="p">:</span> <span class="mi">2</span>
    <span class="nx">descriptions</span><span class="p">:</span> <span class="mi">3</span>
    <span class="nx">chapters</span><span class="p">:</span> <span class="mi">4</span>
    <span class="nx">metadata</span><span class="p">:</span> <span class="mi">5</span>
  <span class="p">)</span> <span class="c1">; kind</span>
  <span class="p">?</span> <span class="mi">1</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; label</span>
  <span class="p">?</span> <span class="mi">2</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; language</span>
<span class="p">}</span>

<span class="nc">changed-text-track </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; id</span>
  <span class="mi">1</span><span class="p">:</span> <span class="nx">text-track-mode </span><span class="c1">; mode</span>
  <span class="p">?</span> <span class="mi">2</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">text-track-cue</span><span class="p">]</span> <span class="c1">; added-cues</span>
  <span class="p">?</span> <span class="mi">3</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">text</span><span class="p">]</span> <span class="c1">; removed-cue-ids</span>
<span class="p">}</span>

<span class="nc">text-track-mode </span><span class="p">=</span> <span class="o">&amp;</span><span class="p">(</span>
  <span class="nx">disabled</span><span class="p">:</span> <span class="mi">1</span>
  <span class="nx">showing</span><span class="p">:</span> <span class="mi">2</span>
  <span class="nx">hidden</span><span class="p">:</span> <span class="mi">3</span>
<span class="p">)</span>

<span class="nc"><dfn>text-track-cue</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; id</span>
  <span class="mi">1</span><span class="p">:</span> <span class="nx">media-timeline-range </span><span class="c1">; range</span>
  <span class="mi">2</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; text</span>
<span class="p">}</span>

<span class="nc">media-sync-time </span><span class="p">=</span> <span class="p">[</span>
  <span class="nx">value</span><span class="p">:</span> <span class="kt">uint</span>
  <span class="nx">scale</span><span class="p">:</span> <span class="kt">uint</span>
<span class="p">]</span>

<span class="nc">media-error </span><span class="p">=</span> <span class="p">[</span>
  <span class="nx">code</span><span class="p">:</span> <span class="o">&amp;</span><span class="p">(</span>
    <span class="nx">user-aborted</span><span class="p">:</span> <span class="mi">1</span>
    <span class="nx">network-error</span><span class="p">:</span> <span class="mi">2</span>
    <span class="nx">decode-error</span><span class="p">:</span> <span class="mi">3</span>
    <span class="nx">source-not-supported</span><span class="p">:</span> <span class="mi">4</span>
    <span class="nx">unknown-error</span><span class="p">:</span> <span class="mi">5</span>
  <span class="p">)</span>
  <span class="nx">message</span><span class="p">:</span> <span class="nx">text</span>
<span class="p">]</span>

<span class="nc">track-state </span><span class="p">=</span> <span class="p">(</span>
  <span class="mi">0</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; id</span>
  <span class="mi">1</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; label</span>
  <span class="mi">2</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; language</span>
<span class="p">)</span>

<span class="nc">audio-track-state </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">track-state</span>
<span class="nx">  3</span><span class="p">:</span> <span class="nx">bool </span><span class="c1">; enabled</span>
<span class="p">}</span>

<span class="nc">video-track-state </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">track-state</span>
<span class="nx">  3</span><span class="p">:</span> <span class="nx">bool </span><span class="c1">; selected</span>
<span class="p">}</span>

<span class="nc">text-track-state </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">track-state</span>
<span class="nx">  3</span><span class="p">:</span> <span class="nx">text-track-mode </span><span class="c1">; mode</span>
<span class="p">}</span>

<span class="c1">; type key 22</span>
<span class="nc"><dfn>audio-frame</dfn> </span><span class="p">=</span> <span class="p">[</span>
  <span class="nx">encoding-id</span><span class="p">:</span> <span class="kt">uint</span>
  <span class="nx">start-time</span><span class="p">:</span> <span class="kt">uint</span>
  <span class="nx">payload</span><span class="p">:</span> <span class="nx">bytes</span>
<span class="nx">  </span><span class="p">?</span> <span class="nx">optional</span><span class="p">:</span> <span class="p">{</span>
    <span class="p">?</span> <span class="mi">0</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; duration</span>
    <span class="p">?</span> <span class="mi">1</span><span class="p">:</span> <span class="nx">media-sync-time </span><span class="c1">; sync-time</span>
  <span class="p">}</span>
<span class="p">]</span>

<span class="c1">; type key 23</span>
<span class="nc"><dfn>video-frame</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; encoding-id</span>
  <span class="mi">1</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; sequence-number</span>
  <span class="p">?</span> <span class="mi">2</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="kt">int</span><span class="p">]</span> <span class="c1">; depends-on</span>
  <span class="mi">3</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; start-time</span>
  <span class="p">?</span> <span class="mi">4</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; duration</span>
  <span class="mi">5</span><span class="p">:</span> <span class="nx">bytes </span><span class="c1">; payload</span>
  <span class="p">?</span> <span class="mi">6</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; video-rotation</span>
  <span class="p">?</span> <span class="mi">7</span><span class="p">:</span> <span class="nx">media-sync-time </span><span class="c1">; sync-time</span>
<span class="p">}</span>

<span class="c1">; type key 24</span>
<span class="nc"><dfn>data-frame</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; encoding-id</span>
  <span class="p">?</span> <span class="mi">1</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; sequence-number</span>
  <span class="p">?</span> <span class="mi">2</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; start-time</span>
  <span class="p">?</span> <span class="mi">3</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; duration</span>
  <span class="mi">4</span><span class="p">:</span> <span class="nx">bytes </span><span class="c1">; payload</span>
  <span class="p">?</span> <span class="mi">5</span><span class="p">:</span> <span class="nx">media-sync-time </span><span class="c1">; sync-time</span>
<span class="p">}</span>

<span class="nc">ratio </span><span class="p">=</span> <span class="p">[</span>
  <span class="nx">antecedent</span><span class="p">:</span> <span class="kt">uint</span>
  <span class="nx">consequent</span><span class="p">:</span> <span class="kt">uint</span>
<span class="p">]</span>

<span class="c1">; type key 122</span>
<span class="nc"><dfn>streaming-capabilities-request</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">request</span>
<span class="p">}</span>

<span class="c1">; type key 123</span>
<span class="nc"><dfn>streaming-capabilities-response</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">response</span>
<span class="nx">  1</span><span class="p">:</span> <span class="nx">streaming-capabilities </span><span class="c1">; streaming-capabilities</span>
<span class="p">}</span>

<span class="nc">streaming-capabilities </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">receive-audio-capability</span><span class="p">]</span> <span class="c1">; receive-audio</span>
  <span class="mi">1</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">receive-video-capability</span><span class="p">]</span> <span class="c1">; receive-video</span>
  <span class="mi">2</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">receive-data-capability</span><span class="p">]</span> <span class="c1">; receive-data</span>
<span class="p">}</span>

<span class="nc">format </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; codec-name</span>
<span class="p">}</span>

<span class="nc">receive-audio-capability </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="nx">format </span><span class="c1">; codec</span>
  <span class="p">?</span> <span class="mi">1</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; max-audio-channels</span>
  <span class="p">?</span> <span class="mi">2</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; min-bit-rate</span>
<span class="p">}</span>

<span class="nc">video-resolution </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; height</span>
  <span class="mi">1</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; width</span>
<span class="p">}</span>

<span class="nc">video-hdr-format </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="nx">text</span><span class="c1">; transfer-function</span>
  <span class="p">?</span> <span class="mi">1</span><span class="p">:</span> <span class="nx">text</span><span class="c1">; hdr-metadata</span>
<span class="p">}</span>

<span class="nc">receive-video-capability </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="nx">format </span><span class="c1">; codec</span>
  <span class="p">?</span> <span class="mi">1</span><span class="p">:</span> <span class="nx">video-resolution </span><span class="c1">; max-resolution</span>
  <span class="p">?</span> <span class="mi">2</span><span class="p">:</span> <span class="nx">ratio </span><span class="c1">; max-frames-per-second</span>
  <span class="p">?</span> <span class="mi">3</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; max-pixels-per-second</span>
  <span class="p">?</span> <span class="mi">4</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; min-bit-rate</span>
  <span class="p">?</span> <span class="mi">5</span><span class="p">:</span> <span class="nx">ratio </span><span class="c1">; aspect-ratio</span>
  <span class="p">?</span> <span class="mi">6</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; color-gamut</span>
  <span class="p">?</span> <span class="mi">7</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">video-resolution</span><span class="p">]</span> <span class="c1">; native-resolutions</span>
  <span class="p">?</span> <span class="mi">8</span><span class="p">:</span> <span class="nx">bool </span><span class="c1">; supports-scaling</span>
  <span class="p">?</span> <span class="mi">9</span><span class="p">:</span> <span class="nx">bool </span><span class="c1">; supports-rotation</span>
  <span class="p">?</span> <span class="mi">10</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">video-hdr-format</span><span class="p">]</span> <span class="c1">; hdr-formats</span>
<span class="p">}</span>

<span class="nc">receive-data-capability </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="nx">format </span><span class="c1">; data-type</span>
<span class="p">}</span>

<span class="c1">; type key 124</span>
<span class="nc"><dfn>streaming-session-start-request</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">request</span>
<span class="nx">  streaming-session-start-request-params</span>
<span class="p">}</span>

<span class="c1">; type key 125</span>
<span class="nc"><dfn>streaming-session-start-response</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">response</span>
<span class="nx">  streaming-session-start-response-params</span>
<span class="p">}</span>

<span class="c1">; A separate group so it can be used in remote-playback-start-request</span>
<span class="nc">streaming-session-start-request-params </span><span class="p">=</span> <span class="p">(</span>
  <span class="mi">1</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; streaming-session-id</span>
  <span class="mi">2</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">media-stream-offer</span><span class="p">]</span> <span class="c1">;  stream-offers</span>
  <span class="mi">3</span><span class="p">:</span> <span class="nx">microseconds </span><span class="c1">; desired-stats-interval</span>
<span class="p">)</span>

<span class="c1">; type key 126</span>
<span class="nc"><dfn>streaming-session-modify-request</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">request</span>
<span class="nx">  streaming-session-modify-request-params</span>
<span class="p">}</span>

<span class="c1">; A separate group so it can be used in remote-playback-start-response</span>
<span class="nc">streaming-session-start-response-params </span><span class="p">=</span> <span class="p">(</span>
  <span class="mi">1</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">result </span><span class="c1">; result</span>
  <span class="mi">2</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">media-stream-request</span><span class="p">]</span> <span class="c1">; stream-requests</span>
  <span class="mi">3</span><span class="p">:</span> <span class="nx">microseconds </span><span class="c1">; desired-stats-interval  </span>
<span class="p">)</span>

<span class="nc">streaming-session-modify-request-params </span><span class="p">=</span> <span class="p">(</span>
  <span class="mi">1</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; streaming-session-id</span>
  <span class="mi">2</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span> <span class="nx">media-stream-request</span><span class="p">]</span> <span class="c1">; stream-requests</span>
<span class="p">)</span>

<span class="c1">; type key 127</span>
<span class="nc"><dfn>streaming-session-modify-response</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">response</span>
<span class="nx">  1</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">result </span><span class="c1">; result</span>
<span class="p">}</span>

<span class="c1">; type key 128</span>
<span class="nc"><dfn>streaming-session-terminate-request</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">request</span>
<span class="nx">  1</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; streaming-session-id</span>
<span class="p">}</span>

<span class="c1">; type key 129</span>
<span class="nc"><dfn>streaming-session-terminate-response</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="nx">response</span>
<span class="p">}</span>

<span class="c1">; type key 130</span>
<span class="nc"><dfn>streaming-session-terminate-event</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; streaming-session-id</span>
<span class="p">}</span>

<span class="nc">media-stream-offer </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; media-stream-id</span>
  <span class="p">?</span> <span class="mi">1</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; display-name</span>
  <span class="p">?</span> <span class="mi">2</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="o">*</span> <span class="nx">audio-encoding-offer</span><span class="p">]</span> <span class="c1">; audio</span>
  <span class="p">?</span> <span class="mi">3</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="o">*</span> <span class="nx">video-encoding-offer</span><span class="p">]</span> <span class="c1">; video</span>
  <span class="p">?</span> <span class="mi">4</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="o">*</span> <span class="nx">data-encoding-offer</span><span class="p">]</span> <span class="c1">; data</span>
<span class="p">}</span>

<span class="nc">media-stream-request </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; media-stream-id</span>
  <span class="p">?</span> <span class="mi">1</span><span class="p">:</span> <span class="nx">audio-encoding-request </span><span class="c1">; audio</span>
  <span class="p">?</span> <span class="mi">2</span><span class="p">:</span> <span class="nx">video-encoding-request </span><span class="c1">; video</span>
  <span class="p">?</span> <span class="mi">3</span><span class="p">:</span> <span class="nx">data-encoding-request </span><span class="c1">; data</span>
<span class="p">}</span>

<span class="nc"><dfn>audio-encoding-offer</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; encoding-id</span>
  <span class="mi">1</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; codec-name</span>
  <span class="mi">2</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; time-scale</span>
  <span class="p">?</span> <span class="mi">3</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; default-duration</span>
<span class="p">}</span>

<span class="nc"><dfn>video-encoding-offer</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; encoding-id</span>
  <span class="mi">1</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; codec-name</span>
  <span class="mi">2</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; time-scale</span>
  <span class="p">?</span> <span class="mi">3</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; default-duration</span>
  <span class="p">?</span> <span class="mi">4</span><span class="p">:</span> <span class="nx">video-rotation </span><span class="c1">; default-rotation</span>
<span class="p">}</span>

<span class="nc"><dfn>data-encoding-offer</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; encoding-id</span>
  <span class="mi">1</span><span class="p">:</span> <span class="nx">text </span><span class="c1">; data-type-name</span>
  <span class="mi">2</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; time-scale</span>
  <span class="p">?</span> <span class="mi">3</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; default-duration</span>
<span class="p">}</span>

<span class="nc">audio-encoding-request </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; encoding-id</span>
<span class="p">}</span>

<span class="nc">video-encoding-request </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; encoding-id</span>
  <span class="p">?</span> <span class="mi">1</span><span class="p">:</span> <span class="nx">video-resolution </span><span class="c1">; target-resolution</span>
  <span class="p">?</span> <span class="mi">2</span><span class="p">:</span> <span class="nx">ratio </span><span class="c1">; max-frames-per-second</span>
<span class="p">}</span>

<span class="nc">data-encoding-request </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; encoding-id</span>
<span class="p">}</span>

<span class="nc">video-rotation </span><span class="p">=</span> <span class="o">&amp;</span><span class="p">(</span>
  <span class="c1">; Degrees clockwise</span>
  <span class="nx">video-rotation-0</span><span class="p">:</span> <span class="mi">0</span>
  <span class="nx">video-rotation-90</span><span class="p">:</span> <span class="mi">1</span>
  <span class="nx">video-rotation-180</span><span class="p">:</span> <span class="mi">2</span>
  <span class="nx">video-rotation-270</span><span class="p">:</span> <span class="mi">3</span>
<span class="p">)</span>

<span class="nc">sender-stats-audio </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; encoding-id</span>
  <span class="p">?</span> <span class="mi">1</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; cumulative-sent-frames</span>
  <span class="p">?</span> <span class="mi">2</span><span class="p">:</span> <span class="nx">microseconds </span><span class="c1">; cumulative-encode-delay</span>
<span class="p">}</span>

<span class="nc">sender-stats-video </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; encoding-id</span>
  <span class="p">?</span> <span class="mi">1</span><span class="p">:</span> <span class="nx">microseconds </span><span class="c1">; cumulative-sent-duration</span>
  <span class="p">?</span> <span class="mi">2</span><span class="p">:</span> <span class="nx">microseconds </span><span class="c1">; cumulative-encode-delay</span>
  <span class="p">?</span> <span class="mi">3</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; cumulative-dropped-frames</span>
<span class="p">}</span>

<span class="c1">; type key 131</span>
<span class="nc"><dfn>streaming-session-sender-stats-event</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="kt">uint</span><span class="c1">; streaming-session-id</span>
  <span class="mi">1</span><span class="p">:</span> <span class="nx">microseconds </span><span class="c1">; system-time</span>
  <span class="p">?</span> <span class="mi">2</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="o">*</span> <span class="nx">sender-stats-audio</span><span class="p">]</span> <span class="c1">; audio</span>
  <span class="p">?</span> <span class="mi">3</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="o">*</span> <span class="nx">sender-stats-video</span><span class="p">]</span> <span class="c1">; video</span>
<span class="p">}</span>

<span class="nc">streaming-buffer-status </span><span class="p">=</span> <span class="o">&amp;</span><span class="p">(</span>
  <span class="nx">enough-data</span><span class="p">:</span> <span class="mi">0</span>
  <span class="nx">insufficient-data</span><span class="p">:</span> <span class="mi">1</span>
  <span class="nx">too-much-data</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">)</span>

<span class="nc">receiver-stats-audio </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; encoding-id</span>
  <span class="p">?</span> <span class="mi">1</span><span class="p">:</span> <span class="nx">microseconds </span><span class="c1">; cumulative-received-duration</span>
  <span class="p">?</span> <span class="mi">2</span><span class="p">:</span> <span class="nx">microseconds </span><span class="c1">; cumulative-lost-duration</span>
  <span class="p">?</span> <span class="mi">3</span><span class="p">:</span> <span class="nx">microseconds </span><span class="c1">; cumulative-buffer-delay</span>
  <span class="p">?</span> <span class="mi">4</span><span class="p">:</span> <span class="nx">microseconds </span><span class="c1">; cumulative-decode-delay</span>
  <span class="p">?</span> <span class="mi">5</span><span class="p">:</span> <span class="nx">streaming-buffer-status </span><span class="c1">; remote-buffer-status</span>
<span class="p">}</span>

<span class="nc">receiver-stats-video </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; encoding-id</span>
  <span class="p">?</span> <span class="mi">1</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; cumulative-decoded-frames</span>
  <span class="p">?</span> <span class="mi">2</span><span class="p">:</span> <span class="kt">uint</span> <span class="c1">; cumulative-lost-frames</span>
  <span class="p">?</span> <span class="mi">3</span><span class="p">:</span> <span class="nx">microseconds </span><span class="c1">; cumulative-buffer-delay</span>
  <span class="p">?</span> <span class="mi">4</span><span class="p">:</span> <span class="nx">microseconds </span><span class="c1">; cumulative-decode-delay</span>
  <span class="p">?</span> <span class="mi">5</span><span class="p">:</span> <span class="nx">streaming-buffer-status </span><span class="c1">; remote-buffer-status</span>
<span class="p">}</span>

<span class="c1">; type key 132</span>
<span class="nc"><dfn>streaming-session-receiver-stats-event</dfn> </span><span class="p">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="p">:</span> <span class="kt">uint</span><span class="c1">; streaming-session-id</span>
  <span class="mi">1</span><span class="p">:</span> <span class="nx">microseconds </span><span class="c1">; system-time</span>
  <span class="p">?</span> <span class="mi">2</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="o">*</span> <span class="nx">receiver-stats-audio</span><span class="p">]</span> <span class="c1">; audio</span>
  <span class="p">?</span> <span class="mi">3</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="o">*</span> <span class="nx">receiver-stats-video</span><span class="p">]</span> <span class="c1">; video</span>
<span class="p">}</span>
</pre></div></div>
